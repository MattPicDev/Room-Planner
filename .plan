# Room Planner - Project Plan

## Project Overview
A visual room layout application that allows users to design room layouts on a grid-based canvas.

## Technology Stack
- **Frontend Framework**: React 18 with TypeScript
- **Build Tool**: Vite
- **Rendering**: HTML5 Canvas
- **State Management**: React hooks (useState, useReducer)
- **Styling**: CSS modules

## Phase 1: Core Features (Current)

### 1. Grid System
- [x] Project scaffolding
- [x] Render grid canvas (graph paper style)
- [x] Configurable grid size (default: 20px squares)
- [x] Grid scale configuration (inches per square)
- [x] Scale persistence in storage
- [x] Pan and zoom functionality
- [x] Grid snapping for objects

### 2. Line Drawing
- [x] Draw lines along grid lines (horizontal/vertical only)
- [x] Line drawing modes: wall, door, window
- [x] Edit existing lines (move endpoints, delete)
- [x] Line properties: thickness, color, type
- [x] Select mode with visual feedback
- [x] Real-time line length display in inches
- [x] Validation: prevent overlapping lines

**Note**: Future version will support diagonal/free-form lines

### 3. Furniture Management
- [x] Define furniture templates (rectangular shapes)
  - Name
  - Dimensions (width x height in inches)
  - Color/style
- [x] Furniture library/palette
- [x] Place furniture on grid (automatically converted to grid scale)
- [x] Move furniture (drag and drop)
- [x] Rotate furniture (90° increments)
- [x] Delete furniture from layout
- [x] Furniture collision detection helpers

### 4. Data Persistence
- [x] Local storage for furniture templates
- [x] Local storage for current layout
- [x] Local storage for grid scale
- [x] Export layout as JSON (includes scale)
- [x] Import layout from JSON (restores scale)

**Note**: Future version will support per-user cloud storage

### 5. Testing
- [x] Unit tests for utility functions
- [x] Test coverage for grid helpers (including scale conversions)
- [x] Test coverage for line helpers
- [x] Test coverage for collision detection (with scale support)
- [x] Test coverage for storage (including grid scale)
- [x] Component tests for React components
- [ ] Integration tests for user workflows

## Phase 2: Future Enhancements

### User Experience Improvements
- [ ] Visual snap indicators when near endpoints or grid
- [ ] Configurable snap distance in UI settings
- [ ] Undo/redo functionality with history management
- [ ] Keyboard shortcuts for common actions
- [ ] Multi-select and bulk operations (move, delete, copy)
- [ ] Touch screen support for mobile devices

### Drawing Enhancements
- [ ] Diagonal and curved line drawing
- [ ] Arc/circle drawing tools
- [ ] Line style variations (dashed, dotted)
- [ ] Dimension annotations and callouts

### Furniture Features
- [ ] Non-rectangular furniture shapes (L-shaped, curved)
- [ ] Furniture collision prevention (detection helpers already implemented)
- [ ] Furniture library with pre-defined templates
- [ ] Furniture search and filtering by category
- [ ] Custom furniture colors and textures

### Export and Sharing
- [ ] Export to image (PNG, JPG)
- [ ] Export to PDF with measurements
- [ ] Print layout functionality
- [ ] Share layouts via URL

### Data Management
- [ ] User authentication and cloud storage
- [ ] Multiple room layouts per user
- [ ] Layout versioning and history
- [ ] Template sharing between users

### Measurement Tools
- [ ] Distance measurement tool
- [ ] Area calculation tool
- [ ] Perimeter calculation
- [ ] Scale ruler overlay

## Development Workflow

### Git Commits
Each feature implementation must include:
1. **Code**: Implementation of the feature
2. **Tests**: Unit and integration tests
3. **Documentation**: Updated README and inline comments

### Testing Strategy
- Unit tests for utility functions
- Component tests for React components
- Integration tests for user workflows
- Manual testing checklist for UI interactions

### Documentation Requirements
- Inline code comments for complex logic
- README with setup instructions
- API documentation for key functions
- User guide for application features

## File Structure
```
src/
├── components/
│   ├── Grid/
│   │   ├── Grid.tsx
│   │   ├── Grid.test.tsx
│   │   └── Grid.css
│   ├── Furniture/
│   │   ├── FurnitureLibrary.tsx
│   │   ├── FurnitureItem.tsx
│   │   └── Furniture.test.tsx
│   ├── Line/
│   │   ├── LineDrawer.tsx
│   │   ├── Line.tsx
│   │   └── Line.test.tsx
│   └── Toolbar/
│       ├── Toolbar.tsx
│       └── Toolbar.test.tsx
├── hooks/
│   ├── useCanvas.ts
│   ├── useGrid.ts
│   └── useFurniture.ts
├── types/
│   ├── grid.ts
│   ├── furniture.ts
│   └── line.ts
├── utils/
│   ├── gridHelpers.ts
│   ├── collisionDetection.ts
│   └── storage.ts
└── App.tsx
```

## Requirements Summary

### Version 1.0 Requirements
1. ✅ Grid-based canvas (graph paper style)
2. ✅ Line drawing along grid lines
3. ✅ Line editing (move, delete)
4. ⏳ Rectangular furniture definition
5. ⏳ Furniture placement and manipulation
6. ✅ Local data persistence

### Constraints
- Lines must follow grid lines (no diagonals yet)
- Furniture must be rectangular
- No user authentication (local storage only)
- Desktop-first design

### Success Criteria
- ✅ User can create a basic room layout with walls
- ✅ User can edit and delete lines
- ✅ User can see line lengths in real-world measurements (inches)
- ✅ User can define and place furniture with accurate dimensions
- ✅ User can set and persist grid scale for measurement accuracy
- ✅ Layout persists across browser sessions
- ✅ All core features have test coverage >80% (190 tests passing)
- ✅ Documentation is complete and accurate
